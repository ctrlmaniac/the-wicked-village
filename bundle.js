(()=>{"use strict";function t(t){for(var o=document.getElementById("main"),e=0,n=t;e<n.length;e++){var r=n[e],i=document.createElement("p");i.innerText=r,o.append(i),window.scrollBy(0,100)}var s=document.createElement("br");s.style.marginBottom="16px",o.append(s)}const o=function(){function o(){this.items=[],this.maxHealth=20,this.health=this.maxHealth}return o.prototype.pickAnItem=function(o){this.items.push(o),t(["You've picked ".concat(o,"!")])},o.prototype.checkItems=function(){if(0==this.items.length)t(["There's nothing in your pockets."]);else{for(var o=[],e=0;e<this.items.length;e++){var n=this.items[e];o.push("".concat(e,": ").concat(n))}t(function(t,o,e){if(e||2===arguments.length)for(var n,r=0,i=o.length;r<i;r++)!n&&r in o||(n||(n=Array.prototype.slice.call(o,0,r)),n[r]=o[r]);return t.concat(n||Array.prototype.slice.call(o))}([],o,!0))}},o.prototype.checkItem=function(t){return this.items.includes(t)},o.prototype.dropItem=function(o){var e=this;0===this.items.length?t(["There's nothing in your pockets."]):(t(["Pick the number of the item you want to drop.","Be careful! You won't be able to recover!","Press Delete, or Q to abort."]),this.checkItems(),document.onkeydown=function(n){if("Delete"===n.key||"q"===n.key)t(["You didn't drop anything."]),o.move();else{var r=parseInt(n.key);isNaN(r)?(t(["You chose wrong!"]),e.dropItem(o)):r<=e.items.length?(t(["You've just dropped "+e.items[r]]),e.items.splice(r,1),o.move()):(t(["This item does not exist!"]),e.dropItem(o))}})},o}();var e;!function(t){t.House2Passepartout="ST2. PASSEPARTOUT",t.KitchenKnife="KITCHEN KNIFE",t.Torch="TORCH"}(e||(e={}));var n,r=(n=function(t,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},n(t,o)},function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=t}n(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)});const i=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.items=[e.Torch],o}return r(o,t),o}(o);var s=function(){function o(t){this.game=t}return o.prototype.blueprint=function(){},o.prototype.welcome=function(){},o.prototype.front=function(){t(["There's nothing here, try again!"]),this.move()},o.prototype.right=function(){t(["There's nothing here, try again!"]),this.move()},o.prototype.back=function(){t(["There's nothing here, try again!"]),this.move()},o.prototype.left=function(){t(["There's nothing here, try again!"]),this.move()},o.prototype.move=function(){var t=this,o=!1;document.onkeydown=function(e){if(!o)switch(o=!0,e.key){case"ArrowUp":case"F":case"f":t.front();break;case"ArrowRight":case"R":case"r":t.right();break;case"ArrowDown":case"B":case"b":t.back();break;case"ArrowLeft":case"L":case"l":t.left();break;case"H":case"h":t.blueprint();break;case"I":case"i":t.game.player.checkItems(),t.move();break;case"D":case"d":t.game.player.dropItem(t)}}},o}();const c=s;var u=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},t(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),a=function(o){function e(t){var e=o.call(this,t)||this;return e.doorLocked=!1,e.game=t,setTimeout((function(){e.doorLocked=!0}),6e4),e}return u(e,o),e.prototype.blueprint=function(){t(["- In front of you there's a gate."]),this.move()},e.prototype.welcome=function(){t(["You're just outside of the village."]),this.blueprint()},e.prototype.front=function(){this.doorLocked?(t(["The gate is closed!","You lose all hopes of finding your daughter!"]),this.game.gameOver()):(t(["You enter the village."]),this.game.scenes.Road1A.welcome())},e.prototype.right=function(){t(["You can't go right, try again!"]),this.move()},e.prototype.back=function(){t(["After all you have done to come here, You can't just go back.","Take courage and go into the village!"]),this.move()},e.prototype.left=function(){t(["You can't go left, try again!"]),this.move()},e}(c);const h=a;var p=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},t(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const f=function(o){function e(){return null!==o&&o.apply(this,arguments)||this}return p(e,o),e.prototype.blueprint=function(){t(["- In front of you the road continues.","- On your right there's a house","- On your back there's the village main gate.","- On your left there's another house."]),this.move()},e.prototype.welcome=function(){t(["You're on the main road."]),this.blueprint()},e.prototype.front=function(){this.game.scenes.Road1B.welcome()},e.prototype.right=function(){this.game.scenes.House2.welcome()},e.prototype.back=function(){this.game.scenes.MainGate.doorLocked?(t(["The gate has been closed!","You can't escape the village!","You need a key to exit..."]),this.move()):this.game.scenes.MainGate.welcome()},e.prototype.left=function(){this.game.scenes.House1.welcome()},e}(c);var l=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},t(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const y=function(o){function e(){return null!==o&&o.apply(this,arguments)||this}return l(e,o),e.prototype.welcome=function(){t(["You're on the main road."]),this.blueprint()},e.prototype.blueprint=function(){t(["- In front of you the road continues.","- On your right there's a house.","- On your back the road takes to the main gate.","- On your left there's another house."]),this.move()},e.prototype.back=function(){this.game.scenes.Road1A.welcome()},e}(c);var m=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},t(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const d=function(o){function e(){var t=null!==o&&o.apply(this,arguments)||this;return t.doorLocked=!0,t}return m(e,o),e.prototype.blueprint=function(){t(["- In front of you there's a closed door.","- On your right there's a window","- On your back there's the main road.","- On your left there's a bench."]),this.move()},e.prototype.welcome=function(){t(["You're in front of a house at the 1 street number.","The house is old and in bad conditions.","You need to find your daugther, maybe the owner knows something..."]),this.blueprint()},e.prototype.front=function(){var o=this,e=!1;t(["The door is closed.","Do you want to knock on the door?"]),document.onkeydown=function(n){if(!e)switch(e=!0,n.key){case"Enter":case"Y":case"y":o.knockOnDoor();break;default:t(["You go back..."]),o.move()}}},e.prototype.knockOnDoor=function(){var o=this;t(["You knock on the door..."]),setTimeout((function(){t(["It seems that noone is in the house.","Do you want to try to open the door?"]),document.onkeydown=function(e){switch(e.key){case"Enter":case"Y":case"y":o.openTheDoor();break;default:t(["You go back..."]),setTimeout((function(){o.move()}),2e3)}}}),4e3)},e.prototype.openTheDoor=function(){var o=this;this.doorLocked&&(t(["You try to open the door but it is closed from the other side.","You go back..."]),setTimeout((function(){o.move()}),4e3))},e.prototype.right=function(){var o=this;t(["There's a window.","You try to see if there's someone inside, but it seems that noone is there.","You go back..."]),setTimeout((function(){o.move()}),2e3)},e.prototype.back=function(){this.game.scenes.Road1A.welcome()},e.prototype.left=function(){t(["There's an old bench here but nothing useful.","You go back..."]),this.move()},e}(c);var g=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},t(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const w=function(o){function e(){var t=null!==o&&o.apply(this,arguments)||this;return t.doorLocked=!1,t}return g(e,o),e.prototype.blueprint=function(){t(["- In front of you there's a closed door.","- On your right there's a window","- On your back there's the main road.","- On your left there's another window."]),this.move()},e.prototype.welcome=function(){t(["The house is at the 2 street number.","It's is very old.","The garden is overgrown and deserted.","It seems that noone has lived in this house for a long time."]),this.blueprint()},e.prototype.front=function(){var o=this,e=!1;t(["The door is closed.","Do you want to knock on the door?"]),document.onkeydown=function(n){if(!e)switch(e=!0,n.key){case"Enter":case"Y":case"y":o.knockOnDoor();break;default:t(["You go back..."]),o.move()}}},e.prototype.knockOnDoor=function(){var o=this,e=!1;t(["You knock on the door..."]),setTimeout((function(){t(["It seems that noone is in the house.","Do you want to try to open the door?"]),document.onkeydown=function(n){if(!e)switch(e=!0,n.key){case"Enter":case"Y":case"y":o.openTheDoor();break;default:t(["You go back..."]),o.move()}}}),4e3)},e.prototype.openTheDoor=function(){var o=this;this.doorLocked?(t(["You try to open the door but it is closed from the other side.","You go back..."]),setTimeout((function(){o.welcome()}),4e3)):(t(["The door is opened and you enter the house..."]),setTimeout((function(){o.game.scenes.House2Hall.welcome()}),2e3))},e.prototype.right=function(){t(["The window is broken. You try to see through.","The house seems abandonded, the fornitures are not in their place.","You see a couch and something shimmers on it.","You go back..."]),this.move()},e.prototype.back=function(){this.game.scenes.Road1A.welcome()},e.prototype.left=function(){t(["The window is really dirty and dusty.","You try to see through but you can't see anything.","You go back..."]),this.move()},e}(c);var v=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},t(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const b=function(o){function n(){return null!==o&&o.apply(this,arguments)||this}return v(n,o),n.prototype.blueprint=function(){t(["- In front of you there's the hallway.","- On your right there's a closed door.","- On your back there's the main door to the road.","- On your left there's the living room."]),this.move()},n.prototype.welcome=function(){t(["You're in the hall.","The house is neglected.","It seems that noone has lived in this house for a long time."]),this.blueprint()},n.prototype.front=function(){t(["The hallway is blocked by some old forniture.","You can't go forward!","You go back..."]),this.move()},n.prototype.right=function(){var o=this,e=!1;t(["There's a closed door. Do you want to try open it?"]),document.onkeydown=function(n){if(!e)switch(e=!0,n.key){case"Enter":case"Y":case"y":o.openTheDoor();break;default:t(["You go back..."]),o.move()}}},n.prototype.openTheDoor=function(){this.game.player.checkItem(e.House2Passepartout)||!this.game.scenes.House2Diningroom.doorLocked?(t(["You unlock the door and enter the room."]),this.game.scenes.House2Diningroom.doorLocked=!1,this.game.scenes.House2Diningroom.welcome()):(t(["The door is locked. You need a key to enter the room.","You go back..."]),this.move())},n.prototype.back=function(){t(["You exit the house."]),this.game.scenes.House2.welcome()},n.prototype.left=function(){this.game.scenes.House2Livingroom.welcome()},n}(c);var k=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},t(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const O=function(o){function n(){return null!==o&&o.apply(this,arguments)||this}return k(n,o),n.prototype.blueprint=function(){t(["- In front of you there's a couch.","- On your right there are some pictures.","- On your back there's the door to the hall.","- On your left there's a shelf"]),this.move()},n.prototype.welcome=function(){t(["The livingroom is a total mess.","You try to walk but the furniture obstructs the way."]),this.blueprint()},n.prototype.front=function(){t(["The couch is dusty and full of leaves, sheets and all sorts of dirty stuff."]),this.game.player.checkItem(e.House2Passepartout)||(t(["You see there's something that shimmer under the light of the sun.","There's a key!"]),this.game.player.pickAnItem(e.House2Passepartout)),t(["You go back..."]),this.move()},n.prototype.back=function(){this.game.scenes.House2Hall.welcome()},n.prototype.right=function(){t(["There are some pictures, maybe they portait the family that used to live here!","There's nothing more here.","You go back..."]),this.move()},n}(c);var _=function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},t(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();const T=function(o){function n(){var t=null!==o&&o.apply(this,arguments)||this;return t.doorLocked=!0,t}return _(n,o),n.prototype.welcome=function(){t(["You're in the dining room.","The smell is so bad!","It looks like the family that used to live here left the food on their plates.","You basically can't move anywhere!"]),this.blueprint()},n.prototype.blueprint=function(){t(["- In front of you there's a table."]),this.move()},n.prototype.front=function(){var o=this,n=!1;t(["The smell is very bed!","The food is left to rot!","Maybe you can take a knife from the dishes, it will be useful in the future!","Do you want to take the knife?"]),document.onkeydown=function(r){if(!n)switch(n=!0,r.key){case"Enter":case"Y":case"y":o.game.player.pickAnItem(e.KitchenKnife)}t(["You go back..."]),o.move()}},n.prototype.back=function(){this.game.scenes.House2Hall.welcome()},n}(c);const Y=function(){function o(t){this.scenes={MainGate:new h(this),Road1A:new f(this),Road1B:new y(this),House1:new d(this),House2:new w(this),House2Hall:new b(this),House2Livingroom:new O(this),House2Diningroom:new T(this)},this.player=t}return o.prototype.gameOver=function(){t(["GAME OVER!"])},o.prototype.play=function(){this.scenes.MainGate.welcome()},o}();var I=document.getElementById("form"),j=document.getElementById("input");I.addEventListener("submit",(function(t){t.preventDefault();var o=j.value.toLowerCase(),e=new KeyboardEvent("keydown",{key:o});document.dispatchEvent(e)})),new Y(new i).play()})();